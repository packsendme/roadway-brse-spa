<div class="row">
  <div class="col-md-12">
    <div class="card card-user">
      <div class="card-body">
        <h3 class="card-title">
          UPDATE CATEGORY
        </h3>
        <form id="add-form" #f="ngForm" novalidate>
          <div div class="col-md-15">
            <div class="card card-plain">
              <div class="card-body">

                <!-- ROW FIELD -  CATEGORY TYPE -->
                <div class="row">
                  <div class="col-md-9 px-1">
                    <div class="form-group">
                      <label>Type Category</label>
                      <select class="form-control" name="category_select"  [(ngModel)]="categoryOne_Obj.categoryType">
                        <option [ngValue]="item" *ngFor="let item of categoriesTypes">{{item.name_category}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-1 col-6 px-1 text-left">
                    <label>&nbsp;</label>
                    <button class="btn btn-sm btn-outline-success btn-round btn-icon" (click)="functionRedirectToCategoryType()">
                      <i class="fa fa-envelope"></i>
                    </button>
                  </div>
                  <!-- Table Edit Change-->
                  <div class="col-md-9 px-1">
                    <div class="form-group">
                      <table class="table">
                        <thead class=" text-primary">
                          <th>
                            Category Type
                          </th>
                          <th>
                            Transport Type
                          </th>
                          <th>
                            Cargo Min
                          </th>
                          <th>
                            Cargo Max
                          </th>
                        </thead>
                        <tbody>
                          <tr>
                            <td>{{categoryOne_Obj.categoryType.name_category}}</td>
                            <td>{{categoryOne_Obj.categoryType.transport_type}}</td>
                            <td>{{categoryOne_Obj.categoryType.weight_max}}</td>
                            <td>{{categoryOne_Obj.categoryType.unity_measurement_weight_max}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <!-- ROW FIELD -  RULE LOCATION -->
                <div class="row">
                  <div class="col-md-9 px-1">
                    <div class="form-group">
                      <label>Rule Distribution</label>
						          <select class="form-control" name="location_select" [(ngModel)]="categoryOne_Obj.locations" multiple>
                        <option [ngValue]="item" *ngFor="let item of locations">{{item.countryName}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-1 col-6 px-1 text-left">
                    <label>&nbsp;</label>
                    <button class="btn btn-sm btn-outline-success btn-round btn-icon" (click)="functionRedirectToLocation()">
                      <i class="fa fa-envelope"></i>
                    </button>
                  </div>
                  <!-- Table Edit Change-->
                  <div class="col-md-9 px-1">
                    <div class="form-group">
                      <table class="table">
                        <thead class=" text-primary">
                          <th>
                            CodCountry
                          </th>
                          <th>
                            Country Name
                          </th>
                        </thead>
                        <tbody>
                          <tr *ngFor="let loc of categoryOne_Obj.locations; let i = index" (click)="selectCategory($event, cat)">
                            <td>{{loc.codCountry}}</td>
                            <td>{{loc.countryName}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <!-- ROW FIELD -  VEHICLE -->
                <div class="row">
                  <div class="col-md-10 px-1">
                    <div class="form-group">
                      <label>Vehicle</label>
						          <select class="form-control" name="vehicle_select" [(ngModel)]="categoryOne_Obj.vehicles" multiple>
                        <option [ngValue]="item" *ngFor="let item of vehicles">{{item.vehicle_type}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-1 col-6 px-1 text-left">
                    <label>&nbsp;</label>
                    <button class="btn btn-sm btn-outline-success btn-round btn-icon" (click)="functionRedirectToVehicle()">
                      <i class="fa fa-envelope"></i>
                    </button>
                  </div>
                  <!-- Table Edit Change-->
                  <div class="col-md-9 px-1">
                    <div class="form-group">
                      <table class="table">
                        <thead class=" text-primary">
                          <th>
                            Vehicle Type
                          </th>
                          <th>
                            Cargo Max
                          </th>
                          <th>
                            Axis
                          </th>
                        </thead>
                        <tbody>
                          <tr *ngFor="let veh of categoryOne_Obj.vehicles; let i = index" (click)="selectCategory($event, cat)">
                            <td>{{veh.vehicle_type}}</td>
                            <td>{{veh.cargo_max}}</td>
                            <td>{{veh.axis_total}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
        <div class="col-md-12">
          <div class="update ml-auto mr-auto">
            <button type="submit" ng-disabled="isDisabled" (click)="generateCostsTable()" class="btn btn-primary btn-round">Update Costs</button>
          </div>
        </div>
        <br>
        <br>
        <h6 class="card-title">
          COSTS CATEGORY
        </h6>
        <br>
        <p-table [value]="categoryCostsDS" dataKey="vehicle" editMode="row" [autoLayout]="true">
          <ng-template pTemplate="header">
            <tr>
              <th>Vehicle</th>
              <th>Weight</th>
              <th>Distance/KM</th>
              <th>Worktime</th>
              <th>Consumption/L</th>
              <th>Action</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
            <ng-container *ngIf="rowData.countryNew == true">
              <tr style="background-color:rgba(247, 248, 155, 0.51);">
                <p-column [style]="{'text-align':'center','font-size':'14px','font-weight':'bold'}">
                  &nbsp;&nbsp;&nbsp;{{rowData.countryName}}
                </p-column>
              </tr>
            </ng-container>
            <tr [pEditableRow]="rowData">
              <td>
                {{rowData.vehicle}}
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText size="10"  type="text" [(ngModel)]="rowData.weight_cost" (keypress)="validateNumber($event)">
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.weight_cost}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText size="10" type="text" [(ngModel)]="rowData.distance_cost" (keypress)="validateNumber($event)">
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.distance_cost}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText  size="10" type="text" [(ngModel)]="rowData.worktime_cost" (keypress)="validateNumber($event)">
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.worktime_cost}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText  size="10" type="text" [(ngModel)]="rowData.average_consumption_cost" (keypress)="validateNumber($event)">
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{rowData.average_consumption_cost}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td style="text-align:center">
                <button *ngIf="!editing" pButton type="button" pInitEditableRow icon="pi pi-pencil"
                class="p-button-info" (click)="onRowEditInit(rowData)" style="height:30px;width:30px;"></button>
                <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check"
                class="p-button-success" style="height:30px;width:30px;" (click)="onRowEditSave(rowData)"></button>
                &nbsp;
                <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times"
                class="p-button-danger" style="height:30px;width:30px;" (click)="onRowEditCancel(rowData, ri)"></button>
              </td>
            </tr>
          </ng-template>
        </p-table>
        <div class="col-md-12">
          &nbsp;
          &nbsp;
        </div>
        <div class="col-md-12">
          <div class="update ml-auto mr-auto">
            <button type="submit" [disabled]="statusEditNew_btn" (click)="saveEditCategory(f)" class="btn btn-primary btn-round">Save</button>
            <button (click)="newRecord(f)" [disabled]="statusEditNew_btn" class="btn btn-primary btn-round">New</button>
            <button type="submit" (click)="editingCategory(f)" class="btn btn-primary btn-round">Editing</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
